{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }
  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
  .kefey-marquee__title {
    text-align: center;
    text-transform: uppercase;
    letter-spacing: .14rem;
    opacity: .8;
    margin-bottom: 1.6rem;
    font-weight: 700;
    font-size: 1.2rem;
  }
  .kefey-marquee {
    overflow: hidden;
    white-space: nowrap;
  }
  .kefey-marquee__track {
    display: inline-flex;
    align-items: center;
    gap: 6rem;
    animation: kefey-marquee-{{ section.id }} linear infinite;
    animation-duration: {{ section.settings.speed }}s;
  }
  @keyframes kefey-marquee-{{ section.id }} {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }
  .kefey-marquee__item img {
    display: block;
    height: {{ section.settings.logo_height }}px;
    width: auto;
    object-fit: contain;
    filter: {% if section.settings.invert %}invert(1){% else %}none{% endif %};
    opacity: .95;
  }
{%- endstyle -%}

<div class="color-{{ section.settings.color_scheme }} isolate gradient">
  <div class="section-{{ section.id }}-padding page-width">
    {%- if section.settings.title != blank -%}
      <div class="kefey-marquee__title">{{ section.settings.title }}</div>
    {%- endif -%}
    <div class="kefey-marquee" aria-hidden="true">
      <div class="kefey-marquee__track">
        {%- for block in section.blocks -%}
          <div class="kefey-marquee__item" {{ block.shopify_attributes }}>
            {%- if block.settings.link != blank -%}
              <a href="{{ block.settings.link }}" class="full-unstyled-link">
                {{ block.settings.logo | image_url: width: 320 | image_tag: loading: 'lazy' }}
              </a>
            {%- else -%}
              {{ block.settings.logo | image_url: width: 320 | image_tag: loading: 'lazy' }}
            {%- endif -%}
          </div>
        {%- endfor -%}
        {%- for block in section.blocks -%}
          <div class="kefey-marquee__item">
            {{ block.settings.logo | image_url: width: 320 | image_tag: loading: 'lazy' }}
          </div>
        {%- endfor -%}
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Kefey logo marquee",
  "tag": "section",
  "class": "section",
  "settings": [
    { "type": "inline_richtext", "id": "title", "label": "Eyebrow title", "default": "AS FEATURED IN" },
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-4" },
    { "type": "range", "id": "logo_height", "min": 20, "max": 80, "step": 2, "unit": "px", "label": "Logo height", "default": 36 },
    { "type": "range", "id": "speed", "min": 8, "max": 60, "step": 1, "unit": "s", "label": "Scroll speed (seconds)", "default": 30 },
    { "type": "checkbox", "id": "invert", "label": "Invert logos for dark background", "default": true },
    { "type": "range", "id": "padding_top", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding top", "default": 24 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 100, "step": 4, "unit": "px", "label": "Padding bottom", "default": 24 }
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "Logo",
      "settings": [
        { "type": "image_picker", "id": "logo", "label": "Logo" },
        { "type": "url", "id": "link", "label": "Optional link" }
      ]
    }
  ],
  "max_blocks": 20,
  "presets": [
    {
      "name": "Kefey logo marquee",
      "blocks": [
        { "type": "logo" },
        { "type": "logo" },
        { "type": "logo" },
        { "type": "logo" }
      ]
    }
  ]
}
{% endschema %}


