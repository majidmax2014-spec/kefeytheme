{{ 'risk-free-banner.css' | asset_url | stylesheet_tag }}
<section
  id="RiskFree-{{ section.id }}"
  class="rf-banner"
  style="
    --rf-bg: {{ section.settings.background_color | default: '#3FB6B4' }};
    --rf-height-desktop: {{ section.settings.section_height_desktop | default: 220 }}px;
    --rf-height-mobile: {{ section.settings.section_height_mobile | default: 180 }}px;
    --rf-pad-x: {{ section.settings.padding_left_right | default: 40 }}px;
    --rf-heading: {{ section.settings.heading_color | default: '#FFC94D' }};
    --rf-text: {{ section.settings.text_color | default: '#FFFFFF' }};
    --rf-btn-text: {{ section.settings.button_text_color | default: '#FFFFFF' }};
    --rf-btn-border: {{ section.settings.button_border_color | default: '#FFFFFF' }};
    --rf-btn-bg: {{ section.settings.button_bg_color | default: 'transparent' }};
    --rf-badge-size: {{ section.settings.badge_size | default: 160 }}px;
    --rf-heading-fs: {{ section.settings.heading_font_size }}px;
    --rf-text-fs: {{ section.settings.text_font_size }}px;
    --rf-btn-fs: {{ section.settings.button_font_size }}px;
  "
>
  {%- for block in section.blocks -%}
    {%- case block.type -%}
      {%- when 'left_decor' -%}
        {%- if block.settings.decor_image != blank -%}
          <img
            class="rf-banner__decor rf-banner__decor--left"
            src="{{ block.settings.decor_image | image_url: width: 800 }}"
            alt="{{ block.settings.alt | default: '' }}"
            style="--decor-w: {{ block.settings.decor_width | default: 220 }}px; --decor-x: {{ block.settings.decor_offset_x | default: 0 }}px; --decor-y: {{ block.settings.decor_offset_y | default: 0 }}px; --decor-z: {{ block.settings.decor_z | default: 0 }}; --decor-opacity: {{ block.settings.decor_opacity | default: 100 | times: 0.01 }};"
            loading="lazy"
            {{ block.shopify_attributes }}
          >
        {%- endif -%}
    {%- endcase -%}
  {%- endfor -%}

  {%- if section.settings.right_decor_enabled -%}
    {%- for block in section.blocks -%}
      {%- case block.type -%}
        {%- when 'decor' -%}
          {%- if block.settings.decor_image != blank -%}
            <img
              class="rf-banner__decor rf-banner__decor--right"
              src="{{ block.settings.decor_image | image_url: width: 600 }}"
              alt="{{ block.settings.alt | default: '' }}"
              style="--w: {{ block.settings.width | default: 80 }}px; --right: {{ block.settings.right | default: 20 }}px; --top: {{ block.settings.top | default: 20 }}px;"
              loading="lazy"
              {{ block.shopify_attributes }}
            >
          {%- endif -%}
      {%- endcase -%}
    {%- endfor -%}
  {%- endif -%}

  <div class="rf-banner__inner">
    <div class="rf-banner__center">
      <div class="rf-banner__badge">
        {%- if section.settings.badge_type == 'image' and section.settings.badge_image != blank -%}
          <img class="rf-badge__img" src="{{ section.settings.badge_image | image_url: width: 360 }}" alt="{{ 'Moneyback guarantee badge' | t }}" loading="lazy">
        {%- else -%}
          {%- liquid
            assign badge_center = section.settings.badge_text_center | default: 'kefey'
            assign badge_ring = section.settings.badge_text_ring | default: 'MONEYBACK GUARANTEED'
          -%}
          <svg class="rf-badge" viewBox="0 0 200 200" width="200" height="200" aria-hidden="true" focusable="false">
            <defs>
              <path id="rf-badge-path-{{ section.id }}" d="M100,100 m-72,0 a72,72 0 1,1 144,0 a72,72 0 1,1 -144,0" />
            </defs>
            <circle cx="100" cy="100" r="78" fill="none" stroke="#fff" stroke-width="2" opacity=".6"></circle>
            <circle cx="100" cy="100" r="2" fill="#fff"></circle>
            <text class="rf-badge__ring" fill="#fff" font-size="14" letter-spacing="2">
              <textPath startOffset="0" textLength="452" href="#rf-badge-path-{{ section.id }}">{{ badge_ring }}</textPath>
            </text>
            <text class="rf-badge__center" x="100" y="108" text-anchor="middle" fill="#2BB4A7" font-weight="700" font-size="26">{{ badge_center }}</text>
          </svg>
        {%- endif -%}
      </div>

      <div class="rf-banner__content">
        {%- if section.settings.heading != blank -%}
          <h2 class="rf-banner__heading">{{ section.settings.heading }}</h2>
        {%- endif -%}
        {%- if section.settings.text != blank -%}
          <div class="rf-banner__text rte">{{ section.settings.text }}</div>
        {%- endif -%}
        {%- if section.settings.button_label != blank -%}
          <a href="{{ section.settings.button_link | default: routes.all_products_collection_url }}"
             class="rf-banner__btn{% if section.settings.button_style == 'solid' %} rf-banner__btn--solid{% endif %}"
             aria-label="{{ section.settings.button_label | escape }}">
            {{ section.settings.button_label | upcase }}
          </a>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Risk-Free Banner",
  "settings": [
    { "type": "color", "id": "background_color", "label": "Background color", "default": "#2BB4A7" },
    { "type": "number", "id": "section_height_desktop", "label": "Height desktop (px)", "default": 220 },
    { "type": "number", "id": "section_height_mobile", "label": "Height mobile (px)", "default": 180 },
    { "type": "number", "id": "padding_left_right", "label": "Side padding (px)", "default": 40 },

    { "type": "text", "id": "heading", "label": "Heading", "default": "TRY IT WITH CONFIDENCE!" },
    { "type": "textarea", "id": "text", "label": "Supporting text", "default": "If it's not for you, we'll make it right.\nWith a full, 100% hassle-free refund." },
    { "type": "text", "id": "button_label", "label": "Button label", "default": "CHECKOUT NOW" },
    { "type": "range", "id": "heading_font_size", "label": "Heading font size (px)", "min": 16, "max": 80, "step": 1, "default": 40 },
    { "type": "range", "id": "text_font_size", "label": "Text font size (px)", "min": 12, "max": 40, "step": 1, "default": 16 },
    { "type": "range", "id": "button_font_size", "label": "Button font size (px)", "min": 12, "max": 32, "step": 1, "default": 14 },
    { "type": "url", "id": "button_link", "label": "Button link" },
    {
      "type": "select",
      "id": "button_style",
      "label": "Button style",
      "default": "outline",
      "options": [
        { "value": "outline", "label": "Outline" },
        { "value": "solid", "label": "Solid" }
      ]
    },
    { "type": "color", "id": "heading_color", "label": "Heading color", "default": "#FFC94D" },
    { "type": "color", "id": "text_color", "label": "Text color", "default": "#FFFFFF" },
    { "type": "color", "id": "button_text_color", "label": "Button text color", "default": "#FFFFFF" },
    { "type": "color", "id": "button_border_color", "label": "Button border color", "default": "#FFFFFF" },
    { "type": "color", "id": "button_bg_color", "label": "Button background color (solid style)", "default": "#FFFFFF" },

    {
      "type": "select",
      "id": "badge_type",
      "label": "Badge type",
      "default": "text",
      "options": [
        { "value": "image", "label": "Image" },
        { "value": "text", "label": "Text badge (SVG)" }
      ]
    },
    { "type": "image_picker", "id": "badge_image", "label": "Badge image" },
    { "type": "number", "id": "badge_size", "label": "Badge size (px)", "default": 160 },
    { "type": "text", "id": "badge_text_center", "label": "Badge center text", "default": "kefey" },
    { "type": "text", "id": "badge_text_ring", "label": "Badge ring text", "default": "MONEYBACK GUARANTEED" },

    { "type": "checkbox", "id": "right_decor_enabled", "label": "Show right decor images (via blocks)", "default": true }
  ],
  "blocks": [
    {
      "type": "left_decor",
      "name": "Left decor",
      "settings": [
        { "type": "image_picker", "id": "decor_image", "label": "Decor image" },
        { "type": "range", "id": "decor_width", "label": "Width (px)", "min": 40, "max": 600, "step": 7, "default": 220 },
        { "type": "range", "id": "decor_offset_x", "label": "Offset X (px)", "min": -300, "max": 300, "step": 6, "default": 0 },
        { "type": "range", "id": "decor_offset_y", "label": "Offset Y (px)", "min": -200, "max": 200, "step": 4, "default": 0 },
        { "type": "range", "id": "decor_z", "label": "Z-index", "min": 0, "max": 5, "step": 1, "default": 0 },
        { "type": "range", "id": "decor_opacity", "label": "Opacity", "min": 0, "max": 100, "step": 5, "default": 95 },
        { "type": "text", "id": "alt", "label": "Alt (leave blank if decorative)" }
      ]
    },
    {
      "type": "decor",
      "name": "Right decor image",
      "settings": [
        { "type": "image_picker", "id": "decor_image", "label": "Image" },
        { "type": "number", "id": "width", "label": "Width (px)", "default": 80 },
        { "type": "number", "id": "top", "label": "Top offset (px)", "default": 20 },
        { "type": "number", "id": "right", "label": "Right offset (px)", "default": 20 },
        { "type": "text", "id": "alt", "label": "Alt (leave blank if decorative)" }
      ]
    }
  ],
  "max_blocks": 4,
  "presets": [
    {
      "name": "Risk-Free Banner",
      "blocks": [
        { "type": "left_decor" },
        { "type": "decor" },
        { "type": "decor" }
      ]
    }
  ]
}
{% endschema %}


