{{ 'header-banner.css' | asset_url | stylesheet_tag }}

{%- liquid
  assign overlay_alpha = section.settings.overlay_opacity | divided_by: 100.0
  assign bg_desktop = section.settings.bg_image_desktop
  if bg_desktop == blank
    assign bg_desktop = section.settings.background_image
  endif
  assign bg_mobile = section.settings.bg_image_mobile
  if bg_mobile == blank
    assign bg_mobile = bg_desktop
  endif

  assign hb_heading_ff = 'inherit'
  if section.settings.hb_heading_ff == 'heading'
    assign hb_heading_ff = 'var(--font-heading-family)'
  elsif section.settings.hb_heading_ff == 'body'
    assign hb_heading_ff = 'var(--font-body-family)'
  endif

  assign hb_desc_ff = 'inherit'
  if section.settings.hb_desc_ff == 'heading'
    assign hb_desc_ff = 'var(--font-heading-family)'
  elsif section.settings.hb_desc_ff == 'body'
    assign hb_desc_ff = 'var(--font-body-family)'
  endif
-%}

<section
  id="HeaderBanner-{{ section.id }}"
  class="header-banner header-banner--{{ section.settings.content_alignment }}"
  style="
    --hb-h: {{ section.settings.banner_height_desktop }}px;
    --hb-h-m: {{ section.settings.banner_height_mobile }}px;
    --hb-content-max: {{ section.settings.content_max_width }}px;
    --hb-content-pad-x: {{ section.settings.content_padding_x }}px;
    --hb-overlay-color: {{ section.settings.overlay_color | color_modify: 'alpha', overlay_alpha }};
    --hb-heading-ff: {{ hb_heading_ff }};
    --hb-heading-fw: {{ section.settings.hb_heading_fw }};
    --hb-heading-fs: {{ section.settings.hb_heading_fs }}px;
    --hb-heading-fs-m: {{ section.settings.hb_heading_fs | times: 0.75 | round: 0 }}px;
    --hb-desc-ff: {{ hb_desc_ff }};
    --hb-desc-fw: {{ section.settings.hb_desc_fw }};
    --hb-desc-fs: {{ section.settings.hb_desc_fs }}px;
    --hb-desc-fs-m: {{ section.settings.hb_desc_fs | times: 0.8 | round: 0 }}px;
  "
>
  <div class="header-banner__media">
    {% if bg_desktop != blank %}
      <picture>
        {% if bg_mobile != blank %}
          <source
            media="(max-width: 749px)"
            srcset="
              {{ bg_mobile | image_url: width: 750 }} 750w,
              {{ bg_mobile | image_url: width: 1100 }} 1100w,
              {{ bg_mobile | image_url: width: 1500 }} 1500w,
              {{ bg_mobile | image_url: width: 2000 }} 2000w
            "
            sizes="100vw"
          >
        {% endif %}
        <img
          srcset="
            {{ bg_desktop | image_url: width: 750 }} 750w,
            {{ bg_desktop | image_url: width: 1100 }} 1100w,
            {{ bg_desktop | image_url: width: 1500 }} 1500w,
            {{ bg_desktop | image_url: width: 2000 }} 2000w
          "
          sizes="100vw"
          src="{{ bg_desktop | image_url: width: 1500 }}"
          alt="{{ bg_desktop.alt | escape }}"
          loading="lazy"
          width="{{ bg_desktop.width }}"
          height="{{ bg_desktop.height }}"
        >
      </picture>
    {% endif %}
  </div>

  {% if section.settings.overlay_enable %}
    <div class="header-banner__overlay" aria-hidden="true"></div>
  {% endif %}

  <div class="header-banner__content-wrap">
    <div class="header-banner__content">
      {% if section.settings.heading != blank %}
        <h1 class="header-banner__heading">{{ section.settings.heading }}</h1>
      {% endif %}
      {% if section.settings.subheading != blank %}
        <div class="header-banner__subheading">{{ section.settings.subheading | newline_to_br }}</div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Header Banner",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "Background image"
    },
    {
      "type": "image_picker",
      "id": "bg_image_desktop",
      "label": "Background image (desktop)"
    },
    {
      "type": "image_picker",
      "id": "bg_image_mobile",
      "label": "Background image (mobile)"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "We reimagine wellness as joy"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading text",
      "default": "Little rituals that care for you and the world around you"
    },
    {
      "type": "header",
      "content": "Typography - Heading"
    },
    {
      "type": "select",
      "id": "hb_heading_ff",
      "label": "Heading font family",
      "default": "heading",
      "options": [
        { "value": "inherit", "label": "Theme default" },
        { "value": "heading", "label": "Heading font" },
        { "value": "body", "label": "Body font" }
      ]
    },
    {
      "type": "select",
      "id": "hb_heading_fw",
      "label": "Heading font weight",
      "default": "700",
      "options": [
        { "value": "inherit", "label": "inherit" },
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" }
      ]
    },
    {
      "type": "range",
      "id": "hb_heading_fs",
      "label": "Heading font size (px)",
      "min": 20,
      "max": 120,
      "step": 2,
      "default": 56
    },
    {
      "type": "header",
      "content": "Typography - Description"
    },
    {
      "type": "select",
      "id": "hb_desc_ff",
      "label": "Description font family",
      "default": "body",
      "options": [
        { "value": "inherit", "label": "Theme default" },
        { "value": "heading", "label": "Heading font" },
        { "value": "body", "label": "Body font" }
      ]
    },
    {
      "type": "select",
      "id": "hb_desc_fw",
      "label": "Description font weight",
      "default": "500",
      "options": [
        { "value": "inherit", "label": "inherit" },
        { "value": "400", "label": "400" },
        { "value": "500", "label": "500" },
        { "value": "600", "label": "600" },
        { "value": "700", "label": "700" },
        { "value": "800", "label": "800" }
      ]
    },
    {
      "type": "range",
      "id": "hb_desc_fs",
      "label": "Description font size (px)",
      "min": 10,
      "max": 40,
      "step": 1,
      "default": 24
    },
    {
      "type": "range",
      "id": "banner_height_desktop",
      "label": "Banner height desktop (px)",
      "min": 300,
      "max": 700,
      "step": 10,
      "default": 460
    },
    {
      "type": "range",
      "id": "banner_height_mobile",
      "label": "Banner height (mobile px)",
      "min": 240,
      "max": 700,
      "step": 10,
      "default": 360
    },
    {
      "type": "range",
      "id": "content_max_width",
      "label": "Content max width (px)",
      "min": 400,
      "max": 1400,
      "step": 10,
      "default": 760
    },
    {
      "type": "select",
      "id": "content_alignment",
      "label": "Content alignment",
      "default": "left",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ]
    },
    {
      "type": "range",
      "id": "content_padding_x",
      "label": "Content side padding (px)",
      "min": 0,
      "max": 200,
      "step": 4,
      "default": 64
    },
    {
      "type": "checkbox",
      "id": "overlay_enable",
      "label": "Enable overlay",
      "default": true
    },
    {
      "type": "color",
      "id": "overlay_color",
      "label": "Overlay color",
      "default": "#000000"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Overlay opacity (%)",
      "min": 0,
      "max": 80,
      "step": 2,
      "default": 24
    }
  ],
  "presets": [
    {
      "name": "Header Banner"
    }
  ]
}
{% endschema %}
